import{a as ie,b as te}from"./chunk-3UQBCJYR.js";import{a as oe}from"./chunk-W6ENELZB.js";import{a as se}from"./chunk-TVRGOZ6Z.js";import{d as X,h as Y,i as Z}from"./chunk-NYQZODR7.js";import{c as ee,d as h}from"./chunk-BBS5CLCL.js";import{b as B,c as C,e as z,f as R,g as q,i as v,k as P,l as H,o as L,r as U,s as J,t as K,u as Q}from"./chunk-7W2NGOAN.js";import"./chunk-A3HZ2PBM.js";import"./chunk-RVXUJXBG.js";import{a as G}from"./chunk-Q2HHWBKA.js";import"./chunk-4Q3JVAKG.js";import{b as $}from"./chunk-MCE4IIOZ.js";import{Aa as W,Ea as x,Fa as D}from"./chunk-F2X7M4DW.js";import"./chunk-WCGJ44IN.js";import{B as b,m as O,p as V}from"./chunk-J6775IRK.js";import{$ as l,Cb as E,Eb as M,Fb as A,Gb as t,Hb as o,Ib as m,Mb as k,Rb as c,Sb as T,Ta as n,V as _,ac as a,bc as f,cc as y,fa as I,ga as w,hb as g,jc as j,nb as N,vb as F,wb as p}from"./chunk-VDH5VFWZ.js";import"./chunk-EQDQRRRY.js";var d=class s{url=`${G.apiUrl}/dispositivos`;http=l($);findAll(){return this.http.get(this.url)}findOne(i){return this.http.get(`${this.url}/${i}`)}create(i){return this.http.post(`${this.url}`,i)}update(i,e){return this.http.put(`${this.url}/${i}`,e)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=_({token:s,factory:s.\u0275fac,providedIn:"root"})};var u=class s{ref=l(ee);dialogService=l(h);dispositivoService=l(d);sedeService=l(se);msg=l(oe);id;listaSedes=[];formData=new q({nombre:new v(void 0,{nonNullable:!0,validators:[C.required]}),codigo:new v(void 0,{nonNullable:!0,validators:[C.required]}),idSede:new v(void 0,{nonNullable:!1}),isActive:new v(!0,{nonNullable:!1})});ngOnInit(){let e=this.dialogService.getInstance(this.ref).data;e&&(this.id=e.id,this.getDispositivo(this.id)),this.cargarSedes()}cargarSedes(){this.sedeService.findAll().subscribe(i=>{this.listaSedes=i})}getDispositivo(i){this.dispositivoService.findOne(i).subscribe({next:e=>{this.formData.get("nombre")?.setValue(e.nombre),this.formData.get("codigo")?.setValue(e.codigo),this.formData.get("idSede")?.setValue(e.idSede),this.formData.get("isActive")?.setValue(e.isActive)}})}get isActive(){return this.formData.get("isActive")?.value}guardar(){let i=this.formData.value;this.id?this.dispositivoService.update(this.id,i).subscribe({next:e=>{this.msg.success("\xA1Actualizado con \xE9xito!"),this.ref.close(e)},error:e=>{this.msg.error(e.error.message)}}):this.dispositivoService.create(i).subscribe({next:e=>{this.msg.success("\xA1Registrado con \xE9xito!"),this.ref.close(e)},error:e=>{this.msg.error(e.error.message)}})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=g({type:s,selectors:[["app-form-dispositivo"]],decls:20,vars:6,consts:[[1,"flex","flex-col","gap-6",3,"formGroup"],[1,"grid","grid-cols-1","gap-3"],[1,"flex","flex-col","gap-2"],["for","nombreDispositivo",1,"text-sm","font-medium"],["id","nombreDispositivo","pInputText","","formControlName","nombre"],["for","codigoDispositivo",1,"text-sm","font-medium"],["id","codigoDispositivo","pInputText","","formControlName","codigo"],["for","idSedeDispositivo",1,"text-sm","font-medium"],["id","idSedeDispositivo","optionLabel","nombre","optionValue","id","formControlName","idSede","placeholder","Seleccione...","emptyFilterMessage","No se encontr\xF3 ning\xFAn resultado","emptyMessage","No se encontr\xF3 ning\xFAn resultado","appendTo","body",3,"options","filter"],[1,"flex","justify-between","gap-2"],[1,"flex","items-center","gap-2","py-1"],["formControlName","isActive"],["for","nombreCargo",1,"text-sm","font-medium","pb-1.5"],["severity","info","size","small",3,"onClick","label","disabled"]],template:function(e,r){e&1&&(t(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),a(4," Nombre del dispositivo "),o(),m(5,"input",4),o(),t(6,"div",2)(7,"label",5),a(8," Android ID "),o(),m(9,"input",6),o(),t(10,"div",2)(11,"label",7),a(12," Edificio "),o(),m(13,"p-select",8),o()(),t(14,"div",9)(15,"div",10),m(16,"p-toggleswitch",11),t(17,"label",12),a(18),o()(),t(19,"p-button",13),c("onClick",function(){return r.guardar()}),o()()()),e&2&&(p("formGroup",r.formData),n(13),p("options",r.listaSedes)("filter",!0),n(5),f(r.isActive?"Activo":"Inactivo"),n(),p("label",r.id?"Actualizar":"Guardar")("disabled",r.formData.invalid))},dependencies:[b,U,P,B,z,R,J,H,L,Z,Y,Q,K,D,x,X,te,ie],encapsulation:2})};var pe=s=>[s];function de(s,i){if(s&1){let e=k();t(0,"div",16),c("click",function(){let S=I(e).$implicit,ae=T();return w(ae.edit(S.id))}),t(1,"div",17),m(2,"span",18),o(),t(3,"div",19),a(4),o(),t(5,"div",20)(6,"div",21)(7,"div",22)(8,"h3",23),a(9),o()(),t(10,"div",22)(11,"small"),a(12,"Edificio:"),o(),t(13,"span",24),a(14),o()()()()()}if(s&2){let e=i.$implicit;n(2),p("ngClass",j(4,pe,e.isActive?"bg-green-500 ring-green-700":"bg-red-500 ring-red-700")),n(2),y(" ",e.codigo," "),n(5),y(" ",e.nombre," "),n(5),f(e.sede==null?null:e.sede.nombre)}}function ce(s,i){s&1&&(t(0,"div",25),a(1," No se encontraron dispositivos registrados. "),o())}var ne=class s{title="Dispositivos";icon="material-symbols:phonelink-ring-outline";dialogService=l(h);dispositivoService=l(d);listaDispositivos=[];ngOnInit(){this.cargarDispositivos()}cargarDispositivos(){this.dispositivoService.findAll().subscribe({next:i=>{this.listaDispositivos=i}})}addNew(){this.dialogService.open(u,{header:"Nuevo dispositivo",styleClass:"modal-md",modal:!0,dismissableMask:!0,closable:!0}).onClose.subscribe(e=>{e&&this.cargarDispositivos()})}edit(i){this.dialogService.open(u,{header:"Editar dispositivo",styleClass:"modal-md",data:{id:i},modal:!0,dismissableMask:!0,closable:!0}).onClose.subscribe(r=>{r&&this.cargarDispositivos()})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=g({type:s,selectors:[["app-dispositivos"]],decls:21,vars:3,consts:[[1,"flex","flex-col","h-full"],[1,"flex","flex-col","justify-center","gap-4","px-6","py-4","h-[8.5rem]"],[1,"flex","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-4"],["data-inline","false",1,"iconify","icon","font-bold","text-4xl"],[1,"text-2xl","font-semibold"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],["severity","info","size","small",3,"click"],[1,"flex","justify-center","items-center","font-medium","gap-1"],["data-icon","uil:plus","data-inline","false",1,"iconify","icon","text-lg"],[1,"flex","flex-col","h-[calc(100%","-","8.5rem)]","px-6"],[1,"px-10"],[1,"flex","flex-wrap","gap-10"],[1,"w-64","h-56","flex","flex-col","gap-4","shadow-2xl","rounded-xl","px-4","py-4","ring-2","ring-slate-700","bg-slate-200","hover:bg-slate-300","cursor-pointer"],["class","text-center text-sm font-extralight",4,"ngIf"],[1,"w-64","h-56","flex","flex-col","gap-4","shadow-2xl","rounded-xl","px-4","py-4","ring-2","ring-slate-700","bg-slate-200","hover:bg-slate-300","cursor-pointer",3,"click"],[1,"flex","justify-end"],[1,"w-4","h-4","rounded-full","ring-2",3,"ngClass"],[1,"rounded-md","text-center","p-2","ring-2","ring-slate-700","font-mono","bg-green-100"],[1,"grow"],[1,"flex","flex-col","items-center","gap-2"],[1,"flex","flex-col","items-center","gap-1"],[1,"font-semibold","text-md","uppercase"],[1,"font-sans","text-md","uppercase"],[1,"text-center","text-sm","font-extralight"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4,"i",4),t(5,"h2",5),a(6),o()()(),t(7,"div",6),m(8,"div",7),t(9,"div",7)(10,"p-button",8),c("click",function(){return r.addNew()}),t(11,"div",9),m(12,"i",10),t(13,"span"),a(14,"Agregar"),o()()()()()(),t(15,"div",11)(16,"div",12)(17,"div",13),M(18,de,15,6,"div",14,E),o(),N(20,ce,2,0,"div",15),o()()()),e&2&&(n(4),F("data-icon",r.icon),n(2),f(r.title),n(12),A(r.listaDispositivos),n(2),p("ngIf",r.listaDispositivos.length===0))},dependencies:[b,O,V,D,x,W],encapsulation:2})};export{ne as DispositivosComponent};
