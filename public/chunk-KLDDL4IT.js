import{b as he,d as ye}from"./chunk-FJLOXZSG.js";import{d as X,g as Y}from"./chunk-6R7BUVFI.js";import{a as ue,b as ge}from"./chunk-3UQBCJYR.js";import{a as Ce,b as xe}from"./chunk-HSUUTGKP.js";import{a as _e}from"./chunk-W6ENELZB.js";import"./chunk-HMF6RJK6.js";import{a as ve,b as be}from"./chunk-RVQOAWJC.js";import{a as N}from"./chunk-LGAXEAXJ.js";import{l as pe,n as de}from"./chunk-CWKDICKV.js";import"./chunk-NYQZODR7.js";import{c as fe,d as b}from"./chunk-BBS5CLCL.js";import{b as Z,c as G,e as ee,f as te,g as ie,i as O,k as oe,l as ne,o as re,r as I,s as ae,t as F,u as D}from"./chunk-7W2NGOAN.js";import"./chunk-A3HZ2PBM.js";import"./chunk-2BOM3PMI.js";import{b as le,d as se,f as me,g as ce}from"./chunk-RVXUJXBG.js";import"./chunk-Q2HHWBKA.js";import"./chunk-4Q3JVAKG.js";import"./chunk-MCE4IIOZ.js";import{Ea as k,Fa as M}from"./chunk-F2X7M4DW.js";import"./chunk-WCGJ44IN.js";import{B as E,m as Q,o as U,p as W}from"./chunk-J6775IRK.js";import{$ as f,$b as w,Cb as B,Eb as H,Fb as P,Gb as o,Hb as n,Ib as m,Jb as L,Kb as q,Mb as T,Rb as p,Sb as u,Ta as a,ac as s,bc as x,cc as K,fa as g,ga as _,hb as y,hc as J,ic as A,jc as j,nb as C,vb as S,wb as l,wc as v}from"./chunk-VDH5VFWZ.js";import{a as R,b as $,c as z}from"./chunk-EQDQRRRY.js";var h=class i{ref=f(fe);dialogService=f(b);cargoService=f(N);formData=new ie({nombre:new O(void 0,{nonNullable:!0,validators:[G.required]}),isActive:new O(!0,{nonNullable:!0,validators:[G.required]})});id;ngOnInit(){let e=this.dialogService.getInstance(this.ref);e.data&&(this.id=e.data.id,this.precargar())}get isActive(){return this.formData.controls.isActive.value}precargar(){this.id&&this.cargoService.findOne(this.id).subscribe({next:e=>{this.formData.controls.nombre.setValue(e.nombre),this.formData.controls.isActive.setValue(e.isActive)}})}guardar(){let e=z(this.formData.value,[]);this.id?this.cargoService.update(this.id,$(R({},e),{id:this.id})).subscribe({next:t=>{this.ref.close(t)}}):this.cargoService.create(e).subscribe({next:t=>{this.ref.close(t)}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-form-cargo"]],decls:13,vars:4,consts:[[1,"grid","grid-cols-1","gap-6",3,"formGroup"],[1,"flex","flex-col","gap-2"],["for","nombreCargo",1,"text-sm","font-medium"],[1,"text-xs"],["id","nombreCargo","pInputText","","formControlName","nombre"],[1,"flex","justify-between","gap-4"],[1,"flex","items-center","gap-2","py-1"],["formControlName","isActive"],["for","nombreCargo",1,"text-sm","font-medium","pb-1.5"],["severity","info","size","small",3,"onClick","label","disabled"]],template:function(t,r){t&1&&(o(0,"form",0)(1,"div",1)(2,"label",2),s(3," Nombre "),o(4,"span",3),s(5,"*"),n()(),m(6,"input",4),n(),o(7,"div",5)(8,"div",6),m(9,"p-toggleswitch",7),o(10,"label",8),s(11),n()(),o(12,"p-button",9),p("onClick",function(){return r.guardar()}),n()()()),t&2&&(l("formGroup",r.formData),a(11),x(r.isActive?"Activo":"Inactivo"),a(),l("label",r.id?"Actualizar":"Guardar")("disabled",r.formData.invalid))},dependencies:[E,ae,oe,Z,ee,te,ne,re,I,D,F,he,ye,M,k,ge,ue],encapsulation:2})};var De=()=>["nombre"],ke=i=>[i],Me=i=>["text-xs uppercase",i],Ne=()=>[];function Ve(i,e){if(i&1&&(o(0,"th",24)(1,"div",24),s(2),n()()),i&2){let t=e.$implicit;l("ngClass",j(3,ke,t.widthClass?t.widthClass:"")),a(),l("ngClass",j(5,Me,t.align?"text-"+t.align:"text-start")),a(),K(" ",t.header," ")}}function Ae(i,e){if(i&1&&(o(0,"tr"),C(1,Ve,3,7,"th",23),n()),i&2){let t=e.$implicit;a(),l("ngForOf",t)}}function je(i,e){if(i&1){let t=T();o(0,"div",30)(1,"p-button",31),p("click",function(){g(t);let c=u().$implicit,d=u();return _(d.editar(c.id))}),m(2,"i",32),n(),o(3,"p-button",33),p("click",function(){g(t);let c=u().$implicit,d=u();return _(d.eliminar(c))}),m(4,"i",32),n()()}i&2&&(a(2),S("data-icon","solar:pen-new-square-linear"),a(2),S("data-icon","solar:trash-bin-trash-broken"))}function Ge(i,e){if(i&1){let t=T();o(0,"tr")(1,"td")(2,"div",25),s(3),n()(),o(4,"td")(5,"div",26),s(6),n()(),o(7,"td")(8,"div",27)(9,"p-tag",28),p("click",function(){let c=g(t).$implicit,d=u();return _(d.changeStatus(c))}),n()()(),o(10,"td"),C(11,je,5,2,"div",29),n()()}if(i&2){let t=e.$implicit;a(3),x(t.orden),a(3),x(t.nombre),a(3),l("value",t.isActive?"Activo":"Inactivo")("severity",t.isActive?"success":"warn"),a(2),l("ngIf",t.isEditable)}}function Oe(i,e){i&1&&(o(0,"td"),m(1,"p-skeleton"),n())}function Re(i,e){if(i&1&&(o(0,"tr",35),C(1,Oe,2,0,"td",36),n()),i&2){let t=u(3);a(),l("ngForOf",t.cols)}}function $e(i,e){i&1&&(L(0),H(1,Re,2,1,"tr",35,B),q()),i&2&&(a(),P(A(0,Ne).constructor(4)))}function ze(i,e){i&1&&(o(0,"tr")(1,"td",37)(2,"div",38),s(3," No se encontraron registros. "),n()()())}function Be(i,e){if(i&1&&C(0,$e,3,1,"ng-container",34)(1,ze,4,0,"ng-template",null,4,v),i&2){let t=w(2),r=u();l("ngIf",r.loadingTable)("ngIfElse",t)}}var Se=class i{title="Cargos";icon="material-symbols:card-travel-outline-rounded";ref;dialogService=f(b);cargoService=f(N);msg=f(_e);cols;loadingTable=!1;exportColumns;dataTable=[];ngOnInit(){this.cols=[{field:"id",header:"ID",customExportHeader:"Cargo ID",align:"center",widthClass:"!w-32"},{field:"nombre",header:"Nombre"},{field:"isActive",header:"Estado",align:"center",widthClass:"!w-28"},{field:"",header:"Acciones",align:"center",widthClass:"!w-36"}],this.exportColumns=this.cols.filter(e=>e.field!="").map(e=>({title:e.header,dataKey:e.field})),this.cargarCargos()}cargarCargos(){this.loadingTable=!0,this.cargoService.findAll().subscribe({next:e=>{this.dataTable=e,this.loadingTable=!1}})}addNew(){this.dialogService.open(h,{header:"Nuevo cargo",styleClass:"modal-md",modal:!0,closable:!0}).onClose.subscribe(t=>{t&&this.cargarCargos()})}editar(e){this.dialogService.open(h,{header:"Editar cargo",styleClass:"modal-md",data:{id:e},modal:!0,dismissableMask:!0,closable:!0}).onClose.subscribe(r=>{r&&this.cargarCargos()})}changeStatus(e){this.msg.confirm(`\xBFEst\xE1 seguro de ${e.isActive?"desactivar":"activar"} el cargo ${e.nombre}?`,()=>{this.cargoService.changeStatus(e.id,!e.isActive).subscribe({next:t=>{this.cargarCargos()}})})}eliminar(e){this.msg.confirm(`\xBFEst\xE1 seguro de eliminar el edificio ${e.nombre}? Esta acci\xF3n no se puede deshacer.`,()=>{this.cargoService.delete(e.id).subscribe({next:t=>{this.cargarCargos()}})})}filterGlobal(e,t){e.filterGlobal(t.value,"contains")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-cargos"]],features:[J([b])],decls:37,vars:9,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],["elseTemplate",""],[1,"flex","flex-col","h-full"],[1,"flex","flex-col","justify-center","gap-4","px-6","py-4","h-[8.5rem]"],[1,"flex","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-4"],["data-inline","false",1,"iconify","icon","font-bold","text-4xl"],[1,"text-2xl","font-semibold"],["severity","danger","size","small",3,"routerLink"],[1,"flex","justify-center","items-center","font-medium","gap-1"],["data-icon","uil:left-arrow-from-left","data-inline","false",1,"iconify","icon","text-lg"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],["styleClass","pi pi-search"],["type","text","pInputText","","placeholder","Buscar",3,"input"],["severity","info","size","small",3,"click"],["data-icon","uil:file-export","data-inline","false",1,"iconify","icon","text-lg"],["data-icon","uil:plus","data-inline","false",1,"iconify","icon","text-lg"],[1,"flex","flex-col","h-[calc(100%","-","8.5rem)]","px-6"],["dataKey","id","stripedRows","","scrollHeight","720px","styleClass","w-full","exportFilename","cargos",3,"value","columns","exportHeader","scrollable","globalFilterFields"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"text-center","text-sm"],[1,"text-start","text-sm","capitalize"],[1,"flex","justify-center","items-center","text-sm","capitalize"],["styleClass","uppercase !font-bold !text-xs cursor-pointer","pTooltip","Cambiar estado","tooltipPosition","top","tooltipStyleClass","!text-xs !font-normal !p-0","rounded","",3,"click","value","severity"],["class","flex justify-center items-center gap-2",4,"ngIf"],[1,"flex","justify-center","items-center","gap-2"],["text","","severity","success","size","small","rounded","","styleClass","!w-10 !p-2","pTooltip","Editar","tooltipPosition","top","tooltipStyleClass","!text-xs !font-normal !p-0",3,"click"],["data-inline","false",1,"iconify","icon","font-bold","text-xl"],["text","","severity","danger","size","small","rounded","","styleClass","!w-10 !p-2","pTooltip","Eliminar","tooltipPosition","top","tooltipStyleClass","!text-xs !font-normal !p-0",3,"click"],[4,"ngIf","ngIfElse"],[1,"h-12"],[4,"ngFor","ngForOf"],["colspan","100"],[1,"text-center","text-sm","font-extralight"]],template:function(t,r){if(t&1){let c=T();o(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),m(4,"i",9),o(5,"h2",10),s(6),n()(),o(7,"p-button",11)(8,"div",12),m(9,"i",13),o(10,"span"),s(11,"Configuraci\xF3n"),n()()()(),o(12,"div",14)(13,"div",15)(14,"p-iconfield"),m(15,"p-inputicon",16),o(16,"input",17),p("input",function(V){g(c);let Te=w(30);return _(r.filterGlobal(Te,V.target))}),n()()(),o(17,"div",15)(18,"p-button",18),p("click",function(){g(c);let V=w(30);return _(V.exportCSV())}),o(19,"div",12),m(20,"i",19),o(21,"span"),s(22,"Exportar"),n()()(),o(23,"p-button",18),p("click",function(){return g(c),_(r.addNew())}),o(24,"div",12),m(25,"i",20),o(26,"span"),s(27,"Agregar"),n()()()()()(),o(28,"div",21)(29,"p-table",22,0),C(31,Ae,2,1,"ng-template",null,1,v)(33,Ge,12,5,"ng-template",null,2,v)(35,Be,3,2,"ng-template",null,3,v),n()()()}t&2&&(a(4),S("data-icon",r.icon),a(2),x(r.title),a(),l("routerLink","/ajustes/configuracion"),a(22),l("value",r.dataTable)("columns",r.cols)("exportHeader","customExportHeader")("scrollable",!0)("globalFilterFields",A(8,De)))},dependencies:[E,Q,U,W,Y,X,I,M,k,de,pe,se,le,D,F,be,ve,xe,Ce,ce,me],encapsulation:2})};export{Se as CargosComponent};
