import{a as ge,b as fe,c as ue}from"./chunk-6P5MTAT3.js";import"./chunk-TDRJEN4G.js";import{a as me,b as de}from"./chunk-HSUUTGKP.js";import{a as pe}from"./chunk-W6ENELZB.js";import{a as ce}from"./chunk-TVRGOZ6Z.js";import{a as le}from"./chunk-LGAXEAXJ.js";import{a as se}from"./chunk-ZGEBOACG.js";import{a as oe,b as re}from"./chunk-KOIAJ6TH.js";import"./chunk-G453X5NG.js";import{d as ee,e as te,l as ie,n as ne}from"./chunk-CWKDICKV.js";import"./chunk-NYQZODR7.js";import{d as ae}from"./chunk-BBS5CLCL.js";import{e as K,j as J,r as U,t as q,u as Q}from"./chunk-7W2NGOAN.js";import"./chunk-FNTIPBS5.js";import"./chunk-A3HZ2PBM.js";import"./chunk-2BOM3PMI.js";import{b as Z,d as $}from"./chunk-RVXUJXBG.js";import"./chunk-Q2HHWBKA.js";import"./chunk-4Q3JVAKG.js";import"./chunk-MCE4IIOZ.js";import{Ea as X,Fa as Y}from"./chunk-F2X7M4DW.js";import"./chunk-WCGJ44IN.js";import{B as G,m as W,o as A,p as H,z}from"./chunk-J6775IRK.js";import{$ as x,$b as M,Cb as j,Eb as L,Fb as N,Gb as i,Hb as a,Ib as f,Jb as O,Kb as R,Mb as D,Rb as u,Sb as y,Ta as r,ac as s,bc as _,cc as C,ec as T,fa as d,fc as E,ga as g,gc as P,hb as B,ic as I,jc as k,nb as h,r as V,sc as v,tc as b,v as F,vb as S,wb as c,wc as w}from"./chunk-VDH5VFWZ.js";import"./chunk-EQDQRRRY.js";var xe=()=>["nombre","apellido"],he=n=>[n],Se=n=>["text-xs uppercase",n],ye=()=>[];function ve(n,t){if(n&1&&(i(0,"th",28)(1,"div",28),s(2),a()()),n&2){let e=t.$implicit;c("ngClass",k(5,he,e.widthClass?e.widthClass:"")),S("colspan",e.colSpan)("rowspan",e.rowSpan),r(),c("ngClass",k(7,Se,e.align?"text-"+e.align:"text-start")),r(),C(" ",e.header," ")}}function be(n,t){if(n&1&&(i(0,"tr"),h(1,ve,3,9,"th",27),a()),n&2){let e=t.$implicit;r(),c("ngForOf",e)}}function we(n,t){if(n&1&&h(0,be,2,1,"tr",26),n&2){let e=t.$implicit;c("ngForOf",e)}}function Me(n,t){if(n&1){let e=D();i(0,"tr")(1,"td")(2,"div",29),s(3),a()(),i(4,"td")(5,"div",30),s(6),a()(),i(7,"td")(8,"div",30),s(9),a()(),i(10,"td")(11,"div",29),s(12),a()(),i(13,"td")(14,"div",29),s(15),a()(),i(16,"td")(17,"div",29),s(18),v(19,"currency"),a()(),i(20,"td")(21,"div",29),s(22),a()(),i(23,"td")(24,"div",29),s(25),v(26,"currency"),a()(),i(27,"td")(28,"div",29),s(29),v(30,"currency"),a()(),i(31,"td")(32,"div",31),s(33),v(34,"currency"),a()(),i(35,"td")(36,"div",32)(37,"p-button",33),u("click",function(){let p=d(e).$implicit,m=y();return g(m.getCalculoPago(p))}),f(38,"i",34),a(),i(39,"p-button",35),u("click",function(){let p=d(e).$implicit,m=y();return g(m.getComprobante(p))}),f(40,"i",34),a()()()()}if(n&2){let e=t.$implicit;r(3),_(e.identificacion),r(3),_(e.nombre),r(3),_(e.apellido),r(3),_(e.sede.nombre),r(3),_(e.cargo.nombre),r(3),C(" ",b(19,12,e.salarioDiario)," "),r(4),C(" ",e.diasLaborados," "),r(3),C(" ",b(26,14,e.salarioMesExtra25)," "),r(4),C(" ",b(30,16,e.salarioMesExtra35)," "),r(4),C(" ",b(34,18,e.pagoNeto)," "),r(5),S("data-icon","solar:calculator-broken"),r(2),S("data-icon","material-symbols:docs-outline-rounded")}}function Te(n,t){n&1&&(i(0,"td"),f(1,"p-skeleton"),a())}function Ee(n,t){if(n&1&&(i(0,"tr",37),h(1,Te,2,0,"td",26),a()),n&2){let e=y(3);r(),c("ngForOf",e.skeletons)}}function Pe(n,t){n&1&&(O(0),L(1,Ee,2,1,"tr",37,j),R()),n&2&&(r(),N(I(0,ye).constructor(4)))}function De(n,t){n&1&&(i(0,"tr")(1,"td",38)(2,"div",39),s(3," No se encontraron registros. "),a()()())}function Ie(n,t){if(n&1&&h(0,Pe,3,1,"ng-container",36)(1,De,4,0,"ng-template",null,4,w),n&2){let e=M(2),o=y();c("ngIf",o.loadingTable)("ngIfElse",e)}}var _e=class n{title="Pago a descanseros";icon="material-symbols:list-alt-check-outline-sharp";ref;dialogService=x(ae);msg=x(pe);sedeService=x(ce);cargoService=x(le);trabajadorService=x(se);fechaSelected;cols;exportColumns;dataTable=[];listaPagoMensual=[];listaSedes=[];selectedSedes=[];listaCargos=[];selectedCargos=[];loadingTable=!1;skeletons=[];ngOnInit(){this.fechaSelected=new Date("2025/04/01"),this.cols=[[{field:"ruc",header:"RUC",align:"center",rowSpan:"2"},{field:"nombre",header:"Nombre",rowSpan:"2"},{field:"apellido",header:"Apellido",rowSpan:"2"},{field:"sede",header:"Edificio",align:"center",rowSpan:"2"},{field:"cargo",header:"Cargo",align:"center",rowSpan:"2"},{field:"sueldoBasico",header:"Pago diario",align:"center",rowSpan:"2"},{field:"diasTrabajados",header:"D\xEDas trabajados",align:"center",rowSpan:"2"},{field:"",header:"Horas extra",align:"center",colSpan:"2"},{field:"total",header:"Total a pagar",align:"center",rowSpan:"2"},{field:"",header:"Acciones",align:"center",rowSpan:"2",widthClass:"!w-36"}],[{field:"horasExtra25",header:"25%",align:"center"},{field:"horasExtra35",header:"35%",align:"center"}]],this.skeletons=Array(this.cols[0].map(t=>t.colSpan??"1").map(t=>parseInt(t)).reduce((t,e)=>t+e,0)),this.exportColumns=this.cols.flatMap(t=>t).filter(t=>t.field!="").map(t=>({title:t.header,dataKey:t.field})),this.cargarPagosMensuales()}cargarPagosMensuales(){this.loadingTable=!0,F([this.sedeService.findAll(),this.cargoService.findAll()]).pipe(V(t=>(this.listaSedes=t[0],this.selectedSedes=this.listaSedes.map(e=>e.id),this.listaCargos=t[1],this.selectedCargos=this.listaCargos.map(e=>e.id),this.trabajadorService.findAllPagoByMonthDescanseros(this.fechaSelected)))).subscribe({next:t=>{this.listaPagoMensual=t,this.loadingTable=!1,this.filtrar()}})}filtrar(t){this.dataTable=this.listaPagoMensual.filter(e=>this.selectedSedes.includes(e.sede.id)&&this.selectedCargos.includes(e.cargo.id))}cambiarFecha(t){this.cargarPagosMensuales()}getComprobante(t){}getCalculoPago(t){}confirm(t){}filterGlobal(t,e){t.filterGlobal(e.value,"contains")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=B({type:n,selectors:[["app-pago-descanseros"]],decls:37,vars:16,consts:[["dt",""],["header",""],["body",""],["emptymessage",""],["elseTemplate",""],[1,"flex","flex-col","h-full"],[1,"flex","flex-col","justify-center","gap-4","px-6","py-4","h-[8.5rem]"],[1,"flex","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-4"],["data-inline","false",1,"iconify","icon","font-bold","text-4xl"],[1,"text-2xl","font-semibold"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],["id","fechaInicio","view","month","dateFormat","MM yy","placeholder","Seleccionar mes","showIcon","","iconDisplay","input","styleClass","w-44","appendTo","body","pTooltip","Mes","tooltipPosition","top","tooltipStyleClass","text-sm",3,"ngModelChange","ngModel","readonlyInput"],["optionLabel","nombre","optionValue","id","placeholder","Edificios","styleClass","w-42","pTooltip","Edificios","tooltipPosition","top","tooltipStyleClass","text-sm",3,"ngModelChange","onChange","options","ngModel","maxSelectedLabels"],["optionLabel","nombre","optionValue","id","placeholder","Cargos","styleClass","w-42","pTooltip","Cargos","tooltipPosition","top","tooltipStyleClass","text-sm",3,"ngModelChange","onChange","options","ngModel","maxSelectedLabels"],["styleClass","pi pi-search"],["type","text","pInputText","","placeholder","Buscar",3,"input"],[1,"flex","items-center","gap-2"],["severity","info","size","small","styleClass","!px-3 !py-1",3,"click"],[1,"flex","justify-center","items-center","font-medium","gap-1"],["data-icon","material-symbols:share-windows-rounded","data-inline","false",1,"iconify","icon","text-lg"],["severity","info","size","small",3,"click"],["data-icon","uil:file-export","data-inline","false",1,"iconify","icon","text-lg"],[1,"flex","flex-col","h-[calc(100%","-","8.5rem)]","px-6"],["dataKey","id","stripedRows","","scrollHeight","720px","styleClass","w-full","exportFilename","planillas",3,"columns","value","scrollable","exportHeader","globalFilterFields"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"text-center","text-sm"],[1,"text-start","text-sm"],[1,"text-center","text-sm","min-w-20"],[1,"flex","justify-center","items-center","gap-2"],["text","","severity","warn","size","small","rounded","","styleClass","!w-10 !p-2",3,"click"],["data-inline","false",1,"iconify","icon","font-bold","text-xl"],["text","","severity","info","size","small","rounded","","styleClass","!w-10 !p-2",3,"click"],[4,"ngIf","ngIfElse"],[1,"h-12"],["colspan","100"],[1,"text-center","text-sm","font-extralight"]],template:function(e,o){if(e&1){let p=D();f(0,"p-toast")(1,"p-confirmdialog"),i(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8),f(6,"i",9),i(7,"h2",10),s(8),a()()(),i(9,"div",11)(10,"div",12)(11,"p-datepicker",13),P("ngModelChange",function(l){return d(p),E(o.fechaSelected,l)||(o.fechaSelected=l),g(l)}),u("ngModelChange",function(l){return d(p),g(o.cambiarFecha(l))}),a(),i(12,"p-multiselect",14),P("ngModelChange",function(l){return d(p),E(o.selectedSedes,l)||(o.selectedSedes=l),g(l)}),u("onChange",function(l){return d(p),g(o.filtrar(l.value))}),a(),i(13,"p-multiselect",15),P("ngModelChange",function(l){return d(p),E(o.selectedCargos,l)||(o.selectedCargos=l),g(l)}),u("onChange",function(l){return d(p),g(o.filtrar(l.value))}),a(),i(14,"p-iconfield"),f(15,"p-inputicon",16),i(16,"input",17),u("input",function(l){d(p);let Ce=M(30);return g(o.filterGlobal(Ce,l.target))}),a()()(),i(17,"div",18)(18,"p-button",19),u("click",function(l){return d(p),g(o.confirm(l))}),i(19,"div",20),f(20,"i",21),i(21,"div"),s(22,"EMITIR COMPROBANTE"),a()()(),i(23,"p-button",22),u("click",function(){d(p);let l=M(30);return g(l.exportCSV())}),i(24,"div",20),f(25,"i",23),i(26,"span"),s(27,"Exportar"),a()()()()()(),i(28,"div",24)(29,"p-table",25,0),h(31,we,1,1,"ng-template",null,1,w)(33,Me,41,20,"ng-template",null,2,w)(35,Ie,3,2,"ng-template",null,3,w),a()()()}e&2&&(r(6),S("data-icon",o.icon),r(2),_(o.title),r(3),T("ngModel",o.fechaSelected),c("readonlyInput",!0),r(),c("options",o.listaSedes),T("ngModel",o.selectedSedes),c("maxSelectedLabels",2),r(),c("options",o.listaCargos),T("ngModel",o.selectedCargos),c("maxSelectedLabels",2),r(16),c("columns",o.cols)("value",o.dataTable)("scrollable",!0)("exportHeader","customExportHeader")("globalFilterFields",I(15,xe)))},dependencies:[G,W,A,H,z,ge,ue,fe,te,ee,re,oe,de,me,Y,X,ne,ie,$,Z,Q,q,U,K,J],encapsulation:2})};export{_e as PagoDescanserosComponent};
