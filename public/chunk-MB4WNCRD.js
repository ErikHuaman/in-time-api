import{a as L,c as Ae,d as Ge,e as Ye,f as He,g as Le,h as ze,i as qe,r as $e,s as Ue}from"./chunk-LAZSPW5C.js";import{g as me}from"./chunk-6R7BUVFI.js";import{a as je,b as Pe}from"./chunk-HSUUTGKP.js";import{a as Oe}from"./chunk-W6ENELZB.js";import{a as Ne,b as Be}from"./chunk-AKEGUMGJ.js";import"./chunk-HMF6RJK6.js";import{b as We}from"./chunk-P7NMCJRN.js";import{b as Re}from"./chunk-RVQOAWJC.js";import{b as Ie}from"./chunk-KOIAJ6TH.js";import"./chunk-G453X5NG.js";import{d as Se,e as P,j as Me,k as Te,l as Fe,n as Ve}from"./chunk-CWKDICKV.js";import{c as De,d as be,i as Ee}from"./chunk-NYQZODR7.js";import{c as ke,d as F}from"./chunk-BBS5CLCL.js";import{b as ce,c as M,e as O,f as ve,g as fe,i as T,j as _e,k as ue,l as Ce,o as we,r as N,s as he,u as ge}from"./chunk-7W2NGOAN.js";import"./chunk-FNTIPBS5.js";import"./chunk-A3HZ2PBM.js";import"./chunk-2BOM3PMI.js";import{f as ye,g as xe}from"./chunk-RVXUJXBG.js";import{a as pe}from"./chunk-Q2HHWBKA.js";import"./chunk-4Q3JVAKG.js";import{b as se}from"./chunk-MCE4IIOZ.js";import{Ea as B,Fa as j}from"./chunk-F2X7M4DW.js";import"./chunk-WCGJ44IN.js";import{B as I,m as ie,o as ne,p as ae,q as re,r as oe,v as le,w as de}from"./chunk-J6775IRK.js";import{$ as u,$b as Z,Cb as U,Eb as K,Fb as J,Gb as a,Hb as r,Ib as _,Jb as Q,Kb as X,Mb as D,Rb as C,Sb as v,Ta as o,V as $,ac as f,bc as ee,cc as h,ec as b,f as q,fa as m,fc as S,ga as p,gc as E,hb as V,hc as te,ic as G,jc as Y,nb as w,sc as g,tc as H,uc as k,vb as A,wb as d,wc as y}from"./chunk-VDH5VFWZ.js";import{a as W,b as z}from"./chunk-EQDQRRRY.js";var x=class i{url=`${pe.apiUrl}/feriados`;http=u(se);findAll(){return this.http.get(this.url)}findOne(t){return this.http.get(`${this.url}/${t}`)}create(t){return this.http.post(`${this.url}`,t)}update(t,e){return this.http.put(`${this.url}/${t}`,e)}findAllByMonth(t){return this.http.post(`${this.url}/ByMonth`,{fecha:t})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var R=class i{ref=u(ke);dialogService=u(F);feriadoService=u(x);msg=u(Oe);id;formData=new fe({title:new T(void 0,{nonNullable:!0,validators:[M.required]}),start:new T(void 0,{nonNullable:!0,validators:[M.required]}),end:new T(void 0,{nonNullable:!0,validators:[M.required]}),recurrente:new T(!1,{nonNullable:!0,validators:[M.required]})});guardar(){let t=this.formData.value;this.id?this.feriadoService.update(this.id,t).subscribe({next:e=>{this.msg.success("\xA1Actualizado con \xE9xito!"),this.ref.close(e)},error:e=>{this.msg.error(e.error.message)}}):this.feriadoService.create(t).subscribe({next:e=>{this.msg.success("\xA1Registrado con \xE9xito!"),this.ref.close(e)},error:e=>{this.msg.error(e.error.message)}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-form-evento"]],decls:20,vars:6,consts:[[1,"flex","flex-col","gap-2"],[1,"grid","grid-cols-1","gap-3",3,"formGroup"],["for","title",1,"text-sm","font-medium"],["id","title","rows","2","cols","30","pTextarea","","formControlName","title"],["for","fechaStart",1,"text-sm","font-medium"],["id","fechaStart","styleClass","w-full uppercase","dateFormat","dd M yy","placeholder","DD MMM YYYY","formControlName","start","appendTo","body",3,"showIcon"],["for","fechaEnd",1,"text-sm","font-medium"],["id","fechaEnd","styleClass","w-full uppercase","dateFormat","dd M yy","placeholder","DD MMM YYYY","formControlName","end","appendTo","body",3,"showIcon"],[1,"flex","gap-2"],["formControlName","recurrente","inputId","recurrente",3,"binary"],["for","recurrente"],[1,"flex","justify-end","gap-2","mt-4"],["severity","info","size","small",3,"onClick","label","disabled"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"form",1)(2,"div",0)(3,"label",2),f(4," T\xEDtulo "),r(),_(5,"textarea",3),r(),a(6,"div",0)(7,"label",4),f(8,"Fecha de inicio"),r(),_(9,"p-datepicker",5),r(),a(10,"div",0)(11,"label",6),f(12,"Fecha de fin"),r(),_(13,"p-datepicker",7),r(),a(14,"div",8),_(15,"p-checkbox",9),a(16,"label",10),f(17,"Aplicar la misma fecha todos los a\xF1os"),r()()(),a(18,"div",11)(19,"p-button",12),C("onClick",function(){return n.guardar()}),r()()()),e&2&&(o(),d("formGroup",n.formData),o(8),d("showIcon",!0),o(4),d("showIcon",!0),o(2),d("binary",!0),o(4),d("label",n.id?"Actualizar":"Guardar")("disabled",n.formData.invalid))},dependencies:[I,N,ue,ce,O,ve,he,Ce,we,ge,j,B,P,Se,Be,Ne,be,De],encapsulation:2})};var et=()=>["nombre","apellido"],tt=i=>[i],it=i=>["text-xs uppercase",i],nt=()=>[];function at(i,t){if(i&1&&_(0,"i",30),i&2){let e=t.$implicit;A("data-icon",e.icon)}}function rt(i,t){if(i&1){let e=D();a(0,"mwl-calendar-month-view",33),C("dayClicked",function(l){m(e);let s=v(2);return p(s.dayClicked(l.day))})("eventClicked",function(l){m(e);let s=v(2);return p(s.handleEvent("Clicked",l.event))})("eventTimesChanged",function(l){m(e);let s=v(2);return p(s.eventTimesChanged(l))}),r()}if(i&2){let e=v(2);d("viewDate",e.viewDate)("events",e.events)("refresh",e.refresh)("activeDayIsOpen",e.activeDayIsOpen)}}function ot(i,t){if(i&1){let e=D();a(0,"mwl-calendar-week-view",34),C("eventClicked",function(l){m(e);let s=v(2);return p(s.handleEvent("Clicked",l.event))})("eventTimesChanged",function(l){m(e);let s=v(2);return p(s.eventTimesChanged(l))}),r()}if(i&2){let e=v(2);d("viewDate",e.viewDate)("events",e.events)("refresh",e.refresh)}}function lt(i,t){if(i&1){let e=D();a(0,"mwl-calendar-day-view",34),C("eventClicked",function(l){m(e);let s=v(2);return p(s.handleEvent("Clicked",l.event))})("eventTimesChanged",function(l){m(e);let s=v(2);return p(s.eventTimesChanged(l))}),r()}if(i&2){let e=v(2);d("viewDate",e.viewDate)("events",e.events)("refresh",e.refresh)}}function dt(i,t){if(i&1&&(a(0,"div")(1,"div",28),w(2,rt,1,4,"mwl-calendar-month-view",31)(3,ot,1,3,"mwl-calendar-week-view",32)(4,lt,1,3,"mwl-calendar-day-view",32),r()()),i&2){let e=v();o(),d("ngSwitch",e.view),o(),d("ngSwitchCase",e.CalendarView.Month),o(),d("ngSwitchCase",e.CalendarView.Week),o(),d("ngSwitchCase",e.CalendarView.Day)}}function st(i,t){if(i&1&&(a(0,"th",37)(1,"div",37),f(2),r()()),i&2){let e=t.$implicit;d("ngClass",Y(3,tt,e.widthClass?e.widthClass:"")),o(),d("ngClass",Y(5,it,e.align?"text-"+e.align:"text-start")),o(),h(" ",e.header," ")}}function mt(i,t){if(i&1&&(a(0,"tr"),w(1,st,3,7,"th",36),r()),i&2){let e=t.$implicit;o(),d("ngForOf",e)}}function pt(i,t){if(i&1&&(a(0,"tr",38)(1,"td")(2,"div",39),f(3),r()(),a(4,"td")(5,"div",40),f(6),g(7,"date"),g(8,"uppercase"),r()(),a(9,"td")(10,"div",40),f(11),g(12,"date"),g(13,"uppercase"),r()()()),i&2){let e=t.$implicit;o(3),h(" ",e.title," "),o(3),h(" ",H(8,6,k(7,3,e.start,"dd MMM yyyy"))," "),o(5),h(" ",H(13,11,k(12,8,e.end,"dd MMM yyyy"))," ")}}function ct(i,t){i&1&&(a(0,"td"),_(1,"p-skeleton"),r())}function vt(i,t){if(i&1&&(a(0,"tr",42),w(1,ct,2,0,"td",43),r()),i&2){let e=v(4);o(),d("ngForOf",e.cols)}}function ft(i,t){i&1&&(Q(0),K(1,vt,2,1,"tr",42,U),X()),i&2&&(o(),J(G(0,nt).constructor(4)))}function _t(i,t){i&1&&(a(0,"tr")(1,"td",44)(2,"div",45),f(3," No se encontraron registros. "),r()()())}function ut(i,t){if(i&1&&w(0,ft,3,1,"ng-container",41)(1,_t,4,0,"ng-template",null,5,y),i&2){let e=Z(2),n=v(2);d("ngIf",n.loadingTable)("ngIfElse",e)}}function Ct(i,t){if(i&1&&(a(0,"div")(1,"p-table",35,1),w(3,mt,2,1,"ng-template",null,2,y)(5,pt,14,13,"ng-template",null,3,y)(7,ut,3,2,"ng-template",null,4,y),r()()),i&2){let e=v();o(),d("columns",e.cols)("value",e.events)("scrollable",!0)("exportHeader","customExportHeader")("globalFilterFields",G(5,et))}}var wt={red:{primary:"#ad2121",secondary:"#FAE3E3"},blue:{primary:"#1e90ff",secondary:"#D1E8FF"},yellow:{primary:"#e3bc08",secondary:"#FDF1BA"}},Je=class i{title="Calendario";icon="material-symbols:calendar-month-outline-rounded";dialogService=u(F);feriadoService=u(x);view=L.Month;CalendarView=L;viewDate=new Date;viewOptions=[{value:"grid",icon:"material-symbols:grid-view-outline-rounded",justify:"Modo cuadr\xEDcula"},{value:"list",icon:"material-symbols:lists",label:"Modo lista"}];viewSelected="grid";modalData;events=[];actions=[{label:'<i class="fas fa-fw fa-pencil-alt"></i>',a11yLabel:"Edit",onClick:({event:t})=>{this.handleEvent("Edited",t)}},{label:'<i class="fas fa-fw fa-trash-alt"></i>',a11yLabel:"Delete",onClick:({event:t})=>{this.events=this.events.filter(e=>e!==t),this.handleEvent("Deleted",t)}}];refresh=new q;cols;exportColumns;loadingTable=!1;activeDayIsOpen=!1;ngOnInit(){this.cols=[{field:"title",header:"T\xEDtulo"},{field:"start",header:"Fecha de inicio",align:"center"},{field:"end",header:"Fecha de fin",align:"center"}],this.exportColumns=this.cols.map(t=>({title:t.header,dataKey:t.field})),this.cargarFeriados()}cargarFeriados(){this.feriadoService.findAllByMonth(this.viewDate).subscribe({next:t=>{this.events=t.map(e=>({title:e.title,start:new Date(e.start),end:e.end?new Date(e.end):void 0,color:W({},wt.blue),allDay:!0}))}})}dayClicked({date:t,events:e}){Ue(t,this.viewDate)&&($e(this.viewDate,t)&&this.activeDayIsOpen===!0||e.length===0?this.activeDayIsOpen=!1:this.activeDayIsOpen=!0,this.viewDate=t)}eventTimesChanged({event:t,newStart:e,newEnd:n}){this.events=this.events.map(l=>l===t?z(W({},t),{start:e,end:n}):l),this.handleEvent("Dropped or resized",t)}handleEvent(t,e){this.modalData={event:e,action:t}}addEvent(){this.dialogService.open(R,{header:"Nuevo feriado",styleClass:"modal-md",position:"top",modal:!0,dismissableMask:!0,closable:!0}).onClose.subscribe(e=>{e&&this.cargarFeriados()})}deleteEvent(t){this.events=this.events.filter(e=>e!==t)}setView(t){this.view=t}closeOpenMonthViewDay(){this.activeDayIsOpen=!1,this.cargarFeriados()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-calendario"]],features:[te([F])],decls:34,vars:16,consts:[["item",""],["dt1",""],["header",""],["body",""],["emptymessage",""],["elseTemplate",""],[1,"flex","flex-col","h-full"],[1,"flex","flex-col","justify-center","gap-4","px-6","py-4","h-[4.875rem]"],[1,"flex","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-4"],["data-inline","false",1,"iconify","icon","font-bold","text-4xl"],[1,"text-2xl","font-semibold"],[1,"h-full","flex","flex-col","gap-4","px-6"],[1,"flex","items-center","justify-between","px-4"],[1,"flex"],["mwlCalendarPreviousView","","tooltipPosition","top","tooltipStyleClass","text-xs p-0.5","pTooltip","Mes anterior",1,"h-8","w-12","bg-sky-500","text-slate-50","hover:bg-sky-600","py-1","px-2","rounded-s-md","flex","items-center","justify-center","cursor-pointer",3,"viewDateChange","view","viewDate"],["data-icon","bx:bxs-chevron-left","data-inline","false",1,"iconify","icon","text-xl"],["mwlCalendarNextView","","tooltipPosition","top","tooltipStyleClass","text-xs !p-0.5","pTooltip","Mes siguiente",1,"h-8","w-12","bg-sky-500","text-slate-50","hover:bg-sky-600","py-1","px-2","rounded-e-md","flex","items-center","justify-center","cursor-pointer",3,"viewDateChange","view","viewDate"],["data-icon","bx:bxs-chevron-right","data-inline","false",1,"iconify","icon","text-xl"],["mwlCalendarToday","",1,"h-8","bg-sky-600","text-slate-50","hover:bg-sky-600","py-1","px-3","rounded-md","flex","items-center","justify-center","cursor-pointer","text-sm","font-medium","uppercase",3,"viewDateChange","viewDate"],[1,"flex","items-center","gap-2"],[1,"text-2xl","font-medium","capitalize","text-center"],[1,"flex","items-center","gap-3"],["severity","info","size","small",3,"click"],[1,"flex","justify-center","items-center","font-medium","gap-1"],["data-icon","material-symbols:add-rounded","data-inline","false",1,"iconify","icon","text-lg"],["optionLabel","label","optionValue","value",3,"ngModelChange","options","ngModel"],[1,"p-2","rounded-lg"],[3,"ngSwitch"],[4,"ngSwitchCase"],["data-inline","false",1,"iconify","icon","font-bold","text-xl"],[3,"viewDate","events","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged",4,"ngSwitchCase"],[3,"viewDate","events","refresh","eventClicked","eventTimesChanged",4,"ngSwitchCase"],[3,"dayClicked","eventClicked","eventTimesChanged","viewDate","events","refresh","activeDayIsOpen"],[3,"eventClicked","eventTimesChanged","viewDate","events","refresh"],["stripedRows","","scrollHeight","720px","styleClass","w-full","exportFilename","adelantos",3,"columns","value","scrollable","exportHeader","globalFilterFields"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"hover:!bg-slate-200","cursor-pointer"],[1,"text-start","text-sm"],[1,"text-center","text-sm"],[4,"ngIf","ngIfElse"],[1,"h-12"],[4,"ngFor","ngForOf"],["colspan","100"],[1,"text-center","text-sm","font-extralight"]],template:function(e,n){if(e&1){let l=D();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),_(4,"i",10),a(5,"h2",11),f(6),r()()()(),a(7,"div",12)(8,"div",13)(9,"div",9)(10,"div",14)(11,"div",15),E("viewDateChange",function(c){return m(l),S(n.viewDate,c)||(n.viewDate=c),p(c)}),C("viewDateChange",function(){return m(l),p(n.closeOpenMonthViewDay())}),_(12,"i",16),r(),a(13,"div",17),E("viewDateChange",function(c){return m(l),S(n.viewDate,c)||(n.viewDate=c),p(c)}),C("viewDateChange",function(){return m(l),p(n.closeOpenMonthViewDay())}),_(14,"i",18),r()(),a(15,"div",19),E("viewDateChange",function(c){return m(l),S(n.viewDate,c)||(n.viewDate=c),p(c)}),C("viewDateChange",function(){return m(l),p(n.closeOpenMonthViewDay())}),f(16," Hoy "),r()(),a(17,"div",20)(18,"h4",21),f(19),g(20,"date"),r()(),a(21,"div",22)(22,"p-button",23),C("click",function(){return m(l),p(n.addEvent())}),a(23,"div",24),_(24,"i",25),a(25,"div"),f(26,"AGREGAR"),r()()(),a(27,"p-selectbutton",26),E("ngModelChange",function(c){return m(l),S(n.viewSelected,c)||(n.viewSelected=c),p(c)}),w(28,at,1,1,"ng-template",null,0,y),r()()(),a(30,"div",27)(31,"div",28),w(32,dt,5,4,"div",29)(33,Ct,9,6,"div",29),r()()()()}e&2&&(o(4),A("data-icon",n.icon),o(2),ee(n.title),o(5),d("view",n.view),b("viewDate",n.viewDate),o(2),d("view",n.view),b("viewDate",n.viewDate),o(2),b("viewDate",n.viewDate),o(4),h(" ",k(20,13,n.viewDate,"MMMM yyyy")," "),o(8),d("options",n.viewOptions),b("ngModel",n.viewSelected),o(4),d("ngSwitch",n.viewSelected),o(),d("ngSwitchCase","grid"),o(),d("ngSwitchCase","list"))},dependencies:[I,ie,ne,ae,re,oe,le,de,me,N,O,_e,Ee,Re,P,xe,ye,We,Ie,j,B,qe,Ae,Ge,Ye,He,Le,ze,Te,Me,Ve,Fe,Pe,je],encapsulation:2})};export{Je as CalendarioComponent};
